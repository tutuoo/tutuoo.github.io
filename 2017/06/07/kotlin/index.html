<!DOCTYPE html>
<html lang="default">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Kotlin 学习笔记（1）基本语法"/>




  <meta name="keywords" content="kotlin," />




  <link rel="alternate" href="/atom.xml" title="Tutuoo">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.3.x" />



<link rel="canonical" href="https://github.com/tutuoo/2017/06/07/kotlin/"/>


<meta name="description" content="关于 Kotlin 的安装，Android studio 3.0及以上自带，其他的可以通过搜索插件 Kotlin 来进行安装。下面来说说有关 Kotlin 的语法。 以下是本人的学习笔记，入有任何不妥之处，随时欢迎拍砖指正。谢谢 ^_^ 1. Kotlin Android 扩展Kotlin 插件自带有安卓扩展，因此不需要再单独安装额外插件。 我们仅需要在项目 module 的 build.grad">
<meta name="keywords" content="kotlin">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin 学习笔记（1）基本语法">
<meta property="og:url" content="https://github.com/tutuoo/2017/06/07/kotlin/index.html">
<meta property="og:site_name" content="Tutuoo">
<meta property="og:description" content="关于 Kotlin 的安装，Android studio 3.0及以上自带，其他的可以通过搜索插件 Kotlin 来进行安装。下面来说说有关 Kotlin 的语法。 以下是本人的学习笔记，入有任何不妥之处，随时欢迎拍砖指正。谢谢 ^_^ 1. Kotlin Android 扩展Kotlin 插件自带有安卓扩展，因此不需要再单独安装额外插件。 我们仅需要在项目 module 的 build.grad">
<meta property="og:image" content="http://opmmds7g1.bkt.clouddn.com/md/1496646577531.png">
<meta property="og:image" content="http://opmmds7g1.bkt.clouddn.com/md/1496647796385.png">
<meta property="og:image" content="http://opmmds7g1.bkt.clouddn.com/md/1496710862973.png">
<meta property="og:image" content="http://opmmds7g1.bkt.clouddn.com/md/1496732611142.png">
<meta property="og:updated_time" content="2017-06-07T05:52:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kotlin 学习笔记（1）基本语法">
<meta name="twitter:description" content="关于 Kotlin 的安装，Android studio 3.0及以上自带，其他的可以通过搜索插件 Kotlin 来进行安装。下面来说说有关 Kotlin 的语法。 以下是本人的学习笔记，入有任何不妥之处，随时欢迎拍砖指正。谢谢 ^_^ 1. Kotlin Android 扩展Kotlin 插件自带有安卓扩展，因此不需要再单独安装额外插件。 我们仅需要在项目 module 的 build.grad">
<meta name="twitter:image" content="http://opmmds7g1.bkt.clouddn.com/md/1496646577531.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.3.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8466adbc25665cf7ee1a15e4fcb73643";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-74273646-1', 'auto');
        ga('send', 'pageview');
  </script>



    <title> Kotlin 学习笔记（1）基本语法 · Tutuoo </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Tutuoo</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="https://github.com/tutuoo">
        <li class="mobile-menu-item">
          
          
            Github
          
        </li>
      </a>
    
      <a href="/leave">
        <li class="mobile-menu-item">
          
          
            Leave
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Tutuoo</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="https://github.com/tutuoo">
            
            
              Github
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/leave">
            
            
              Leave
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Kotlin 学习笔记（1）基本语法
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Jun 7, 2017
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Kotlin-Android-扩展"><span class="toc-text">1. Kotlin Android 扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-定义函数"><span class="toc-text">2. 定义函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-定义局部变量"><span class="toc-text">3. 定义局部变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-注释"><span class="toc-text">4. 注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-使用字符串模板"><span class="toc-text">5. 使用字符串模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-使用条件表达式"><span class="toc-text">6. 使用条件表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-使用可空变量以及空值检查"><span class="toc-text">7. 使用可空变量以及空值检查</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-可空类型和非空类型"><span class="toc-text">7.1 可空类型和非空类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-在条件中检查-null"><span class="toc-text">7.2 在条件中检查 null</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-安全调用"><span class="toc-text">7.3 安全调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-Elvis-操作符"><span class="toc-text">7.4 Elvis 操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-操作符"><span class="toc-text">7.5 !! 操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6-安全转换"><span class="toc-text">7.6 安全转换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-使用值检查并自动转换"><span class="toc-text">8. 使用值检查并自动转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-使用循环"><span class="toc-text">9. 使用循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-使用-while-循环"><span class="toc-text">10. 使用 while 循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-使用-when-表达式"><span class="toc-text">11. 使用 when 表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-使用ranges"><span class="toc-text">12. 使用ranges</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-使用集合"><span class="toc-text">13. 使用集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于我"><span class="toc-text">关于我</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#感谢"><span class="toc-text">感谢</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>关于 Kotlin 的安装，Android studio 3.0及以上自带，其他的可以通过搜索插件 Kotlin 来进行安装。下面来说说有关 Kotlin 的语法。</p>
<p>以下是本人的学习笔记，入有任何不妥之处，随时欢迎拍砖指正。<br>谢谢 <code>^_^</code></p>
<h3 id="1-Kotlin-Android-扩展"><a href="#1-Kotlin-Android-扩展" class="headerlink" title="1. Kotlin Android 扩展"></a>1. Kotlin Android 扩展</h3><p>Kotlin 插件自带有安卓扩展，因此不需要再单独安装额外插件。</p>
<p>我们仅需要在项目 module 的 build.gradle 文件中启用 Gradle 安卓扩展插件即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;kotlin-android-extensions&apos;</div></pre></td></tr></table></figure>
<p>这样我们就可以用简写了，比如在 XML 中定义一个 TextView</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;TextView</div><div class="line">        android:id=&quot;@+id/hello&quot;</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:text=&quot;Hello World!&quot;/&gt;</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>我这里 ID 设置为『hello』那么我们在 Activity 中的代码就变成了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class KotlinActivity : AppCompatActivity() &#123;</div><div class="line"></div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_kotlin)</div><div class="line">        hello.text = &quot;你是不是傻&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样直接通过 hello.text 来设置内容，而不是原来长长的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">findView(R.id.textView) as TextView</div></pre></td></tr></table></figure>
<p>该插件相当于把 XML 中的控件『id』作为 Activity 的额外属性来使用。<br>简洁了很多~~</p>
<h3 id="2-定义函数"><a href="#2-定义函数" class="headerlink" title="2. 定义函数"></a>2. 定义函数</h3><p>Kotlin 中所有的函数直接通过 fun 来声明。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fun sum(a: Int , b: Int) : Int&#123;</div><div class="line">    return a + b</div><div class="line">&#125;</div><div class="line"></div><div class="line">fun sum(a: Int, b: Int) = a + b</div></pre></td></tr></table></figure>
<p>上面两种方式都可以通过以下代码来调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">println(sum(3, 5))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: 8</div></pre></td></tr></table></figure>
<h3 id="3-定义局部变量"><a href="#3-定义局部变量" class="headerlink" title="3. 定义局部变量"></a>3. 定义局部变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">val a: Int = 1  // 立即初始化</div><div class="line">val b = 2   // 推导出Int型</div><div class="line">val c: Int  // 当没有初始化值时必须声明类型</div><div class="line">c = 3       // 赋值</div><div class="line">println(&quot;a = $a, b = $b, c = $c&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var x = 5 // 推导出Int类型</div><div class="line">x += 1</div><div class="line">println(&quot; x = $x&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: x = 6</div></pre></td></tr></table></figure>
<h3 id="4-注释"><a href="#4-注释" class="headerlink" title="4. 注释"></a>4. 注释</h3><p>与 Java 和 JavaScript 一样，Kotlin 支持单行注释和块注释。</p>
<h3 id="5-使用字符串模板"><a href="#5-使用字符串模板" class="headerlink" title="5. 使用字符串模板"></a>5. 使用字符串模板</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var a = 1</div><div class="line">// 使用变量名作为模板:</div><div class="line">val s1 = &quot;a is $a&quot;</div><div class="line">println(s1)</div><div class="line"></div><div class="line">a = 2</div><div class="line">// 使用表达式作为模板:</div><div class="line">val s2 = &quot;$&#123;s1.replace(&quot;is&quot;, &quot;was&quot;)&#125;, but now is $a&quot;</div><div class="line">println(s2)</div><div class="line">println(s1)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: a is 1</div><div class="line">I/System.out: a was 1, but now is 2                   </div><div class="line">I/System.out: a is 1</div></pre></td></tr></table></figure>
<p>我发现在 val s2 中通过 replace 修改了 s1 的值，但是在最后的输出 s1 时，s1 的值并没有改变。<br>通过进入 replac 方法得知使用该方法后的字符串会重新生成新的字符串，并不改变原值~O(∩_∩)O哈哈~ 一看就是我 Java 基础没学好~<br>附图：<br><img src="http://opmmds7g1.bkt.clouddn.com/md/1496646577531.png" width="961"></p>
<h3 id="6-使用条件表达式"><a href="#6-使用条件表达式" class="headerlink" title="6. 使用条件表达式"></a>6. 使用条件表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">fun maxOf(a: Int, b: Int): Int &#123;</div><div class="line">    if (a &gt; b) &#123;</div><div class="line">        return a</div><div class="line">    &#125; else &#123;</div><div class="line">        return b</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fun maxOf(a: Int, b: Int) = if (a &gt; b) a else b</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">println(&quot;我今年$&#123;maxOf(0, 18)&#125;岁了.&quot;)</div><div class="line">hello.text = &quot;我今年$&#123;maxOf(0, 18)&#125;岁了.&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: 我今年18岁了.</div></pre></td></tr></table></figure>
<p><img src="http://opmmds7g1.bkt.clouddn.com/md/1496647796385.png" width="396"></p>
<p>以上两种方式都可以表达。</p>
<h3 id="7-使用可空变量以及空值检查"><a href="#7-使用可空变量以及空值检查" class="headerlink" title="7. 使用可空变量以及空值检查"></a>7. 使用可空变量以及空值检查</h3><p>开发中最常见的错误应该就是<code>NullPointerException</code>了，那么 Kotlin 是怎么解决这个问题的呢?</p>
<h4 id="7-1-可空类型和非空类型"><a href="#7-1-可空类型和非空类型" class="headerlink" title="7.1 可空类型和非空类型"></a>7.1 可空类型和非空类型</h4><p>Kotlin 中用 ? 来表示该变量是否可以为空。下面看实例</p>
<p><img src="http://opmmds7g1.bkt.clouddn.com/md/1496710862973.png" width="214"><br>当我们没有明确 String 可以为空的情况下，当 String 赋予null 时，会报错，导致无法运行。</p>
<p>前者我们可以直接调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val l2 = a2.length</div><div class="line">但是后者</div><div class="line">val l3 = a3.length</div></pre></td></tr></table></figure>
<p>我们不可以直接调用，因为 a3 可能为空，这里我们就要用到条件表达式了</p>
<h4 id="7-2-在条件中检查-null"><a href="#7-2-在条件中检查-null" class="headerlink" title="7.2 在条件中检查 null"></a>7.2 在条件中检查 null</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">val l3 = if (a3 != null) a3.length else -1</div><div class="line"></div><div class="line">// 输出如下：</div><div class="line">I/System.out: 3</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if (a3 != null &amp;&amp; a3.isNotEmpty())</div><div class="line">    println(&quot;Stirng of length $&#123;a3.length&#125;&quot;)</div><div class="line">else</div><div class="line">    println(&quot;Empty string&quot;)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: Stirng of length 3</div></pre></td></tr></table></figure>
<h4 id="7-3-安全调用"><a href="#7-3-安全调用" class="headerlink" title="7.3 安全调用"></a>7.3 安全调用</h4><p>使用安全操作符，<code>?.</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a3?.length</div></pre></td></tr></table></figure>
<p>如果 <code>a3</code> 不为空则返回长度，否则返回空。<br>这个表达式的的类型是<code>Int?</code></p>
<p>安全调用在链式调用是是很有用的。比如，如果 Bob 是一个雇员可能分配部门(也可能不分配)，如果我们想获取 Bob 的部门名作为名字的前缀，就可以这样做：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bob?.department?.head?.name</div></pre></td></tr></table></figure>
<p>这样的调用链在任何一个属性为空都会返回空。</p>
<h4 id="7-4-Elvis-操作符"><a href="#7-4-Elvis-操作符" class="headerlink" title="7.4 Elvis 操作符"></a>7.4 Elvis 操作符</h4><p>使用 Elvis 操作符，<code>?:</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">val l = b.length?: -1</div></pre></td></tr></table></figure>
<p>如果 <code>?:</code> 左边表达式不为空则返回，否则返回右边的表达式。注意右边的表达式只有在左边表达式为空才会返回。</p>
<h4 id="7-5-操作符"><a href="#7-5-操作符" class="headerlink" title="7.5 !! 操作符"></a>7.5 !! 操作符</h4><p>用 b!! ，这会返回一个非空的 b 或者抛出一个 b 为空的 NPE</p>
<p><code>val l = b !!.length</code></p>
<h4 id="7-6-安全转换"><a href="#7-6-安全转换" class="headerlink" title="7.6 安全转换"></a>7.6 安全转换</h4><p>普通的转换可能产生 ClassCastException 异常。另一个选择就是使用安全转换，如果不成功就返回空：</p>
<p><img src="http://opmmds7g1.bkt.clouddn.com/md/1496732611142.png" width="256"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var b = &quot;aaa&quot;</div><div class="line">val aInt: Int? = b as? Int</div><div class="line">println(aInt)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">输出如下：</div><div class="line">I/System.out: null</div></pre></td></tr></table></figure>
<p>这样如果 b 是 int 的类型的就输出，不是就返回 null<br>而不会像以前一样程序 crash 后报 ClassCastException 异常</p>
<h3 id="8-使用值检查并自动转换"><a href="#8-使用值检查并自动转换" class="headerlink" title="8. 使用值检查并自动转换"></a>8. 使用值检查并自动转换</h3><p>使用 <code>is</code> 操作符检查一个表达式是否是某个类型的实例。如果对不可变的局部变量或属性进行过了类型检查，就没有必要明确转换：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fun printLength(obj: Any) &#123;</div><div class="line">    println(&quot;&apos;$obj&apos; string length is $&#123;getStringLength(obj) ?: &quot;... err, not a string&quot;&#125; &quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">fun getStringLength(obj: Any): Int? &#123;</div><div class="line">  if (obj is String) &#123;</div><div class="line">    // obj 将会在这个分支中自动转换为 String 类型</div><div class="line">    return obj.length</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // obj 在种类检查外仍然是 Any 类型</div><div class="line">  return null</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过调用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">printLength(&quot;Incomprehensibilities&quot;)</div><div class="line">printLength(1000)</div><div class="line">printLength(listOf(Any()))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">输出如下：</div><div class="line">I/System.out: &apos;Incomprehensibilities&apos; string length is 21 </div><div class="line">I/System.out: &apos;1000&apos; string length is ... err, not a string </div><div class="line">I/System.out: &apos;[java.lang.Object@72fd5e4]&apos; string length is ... err, not a string</div></pre></td></tr></table></figure>
<p>当然我们也可以换一种方式来写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">fun getStringLength(obj: Any): Int? &#123;</div><div class="line">  if (obj !is String) return null</div><div class="line"></div><div class="line">  // obj 将会在这个分支中自动转换为 String 类型</div><div class="line">  return obj.length</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>甚至可以这样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">fun getStringLength(obj: Any): Int? &#123;</div><div class="line">    // obj 将会在&amp;&amp;右边自动转换为 String 类型</div><div class="line">  if (obj is String &amp;&amp; obj.length &gt; 0) &#123;</div><div class="line">    return obj.length</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  return null</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>以上代码的输出结果是不变的。</strong></p>
<h3 id="9-使用循环"><a href="#9-使用循环" class="headerlink" title="9. 使用循环"></a>9. 使用循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">val items = listOf(&quot;Google&quot;, &quot;Apple&quot;, &quot;Amazon&quot;)</div><div class="line">for (index in items.indices) &#123;</div><div class="line">    println(&quot;item at $index is $&#123;items[index]&#125;&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 输出如下： </div><div class="line">I/System.out: item at 0 is Google</div><div class="line">I/System.out: item at 1 is Apple</div><div class="line">I/System.out: item at 2 is Amazon</div></pre></td></tr></table></figure>
<h3 id="10-使用-while-循环"><a href="#10-使用-while-循环" class="headerlink" title="10. 使用 while 循环"></a>10. 使用 while 循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">val items = listOf(&quot;Google&quot;, &quot;Apple&quot;, &quot;Amazon&quot;)</div><div class="line">var index = 0</div><div class="line">while (index &lt; items.size) &#123;</div><div class="line">    println(&quot;item at $index is $&#123;items[index]&#125;&quot;)</div><div class="line">    index++</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出结果和 for 循环一样</p>
<h3 id="11-使用-when-表达式"><a href="#11-使用-when-表达式" class="headerlink" title="11. 使用 when 表达式"></a>11. 使用 when 表达式</h3><p>Kotlin 中的 when 表达式就是类似于 Java 中的 switch 语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">when (obj) &#123;</div><div class="line">  1          -&gt; &quot;One&quot;</div><div class="line">  &quot;Hello&quot;    -&gt; &quot;Greeting&quot;</div><div class="line">  is Long    -&gt; &quot;Long&quot;</div><div class="line">  !is String -&gt; &quot;Not a string&quot;</div><div class="line">  else       -&gt; &quot;Unknown&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">println(describe(1))</div><div class="line">println(describe(&quot;Hello&quot;))</div><div class="line">println(describe(1000L))</div><div class="line">println(describe(2))</div><div class="line">println(describe(&quot;other&quot;))</div></pre></td></tr></table></figure>
<p>参数分别使用了『1』，『Hello』，『1000L』，『2』，『other』<br>分别对应下列的输出。和 switch 语法一模一样，只不过把一些过程给简化了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: item at 2 is kiwi</div><div class="line">I/System.out: One</div><div class="line">I/System.out: Greeting</div><div class="line">I/System.out: Long</div><div class="line">I/System.out: Not a string</div><div class="line">I/System.out: Unknown</div></pre></td></tr></table></figure>
<p>可能对于第四个有疑惑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">println(describe(2))</div><div class="line"></div><div class="line">!is String -&gt; &quot;Not a string&quot;</div></pre></td></tr></table></figure>
<p>以上意思是说 2 不是 String 类型的实例，结果为 true 所以输出了 『Not a string』</p>
<h3 id="12-使用ranges"><a href="#12-使用ranges" class="headerlink" title="12. 使用ranges"></a>12. 使用ranges</h3><p><strong>使用 in 操作符检查数值是否在某个范围内：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">val x = 10</div><div class="line">val y = 9</div><div class="line">if (x in 1..y+1) &#123;</div><div class="line">    println(&quot;fits in range&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: fits in range</div></pre></td></tr></table></figure>
<p>表达式的意思是说 x 是否在 1 ~ y + 1 的范围内<br>从定义的 x 和 y 的值来说，显而易见为 true</p>
<p><strong>检查数值是否在范围外：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">val list = listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</div><div class="line"></div><div class="line">if (-1 !in 0..list.lastIndex) &#123;</div><div class="line">    println(&quot;list.lastIndex: $&#123;list.lastIndex&#125;&quot;)</div><div class="line">    println(&quot;-1 is out of range&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">if (list.size !in list.indices) &#123;</div><div class="line">    println(&quot;list.indices: $&#123;list.indices&#125;&quot;)</div><div class="line">    println(&quot;list size is out of valid list indices range too&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: list.lastIndex: 2</div><div class="line">I/System.out: -1 is out of range</div><div class="line">I/System.out: list.indices: 0..2</div><div class="line">I/System.out: list size is out of valid list indices range too</div></pre></td></tr></table></figure>
<p><code>!in</code> 即不属于该范围 -1 不属于0~2，3也不属于0~2<br>所以他们的<code>println</code>语句都输出了。</p>
<p><strong>在范围内迭代或者使用步进：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">for (x in 1..5) &#123;</div><div class="line">  println(x)</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(&quot;----------------&quot;)</div><div class="line"></div><div class="line">for (x in 1..10 step 2) &#123;</div><div class="line">  println(x)</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(&quot;----------------&quot;)</div><div class="line"></div><div class="line">for (x in 9 downTo 0 step 3) &#123;</div><div class="line">  println(x)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// 输出如下：</div><div class="line">I/System.out: 1</div><div class="line">I/System.out: 2</div><div class="line">I/System.out: 3</div><div class="line">I/System.out: 4</div><div class="line">I/System.out: 5</div><div class="line">I/System.out: ----------------</div><div class="line">I/System.out: 1</div><div class="line">I/System.out: 3</div><div class="line">I/System.out: 5</div><div class="line">I/System.out: 7</div><div class="line">I/System.out: 9</div><div class="line">I/System.out: ----------------</div><div class="line">I/System.out: 9</div><div class="line">I/System.out: 6</div><div class="line">I/System.out: 3</div><div class="line">I/System.out: 0</div></pre></td></tr></table></figure>
<p><code>step</code> 跳跃<br><code>downTo</code> 从大到小<br>看了 Log 日志，聪明的你应该懂了吧~~</p>
<h3 id="13-使用集合"><a href="#13-使用集合" class="headerlink" title="13. 使用集合"></a>13. 使用集合</h3><p><strong>对一个集合进行迭代：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">val items = listOf(&quot;Google&quot;, &quot;Apple&quot;, &quot;Amazon&quot;)</div><div class="line">for (item in items) &#123;</div><div class="line">    println(item)</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(&quot;----------------&quot;)</div><div class="line"></div><div class="line">when &#123;</div><div class="line">       &quot;tutu_oo&quot; in items -&gt; println(&quot;Change The World&quot;)</div><div class="line">       &quot;Google&quot; in items -&gt; println(&quot;My Dream&quot;)</div><div class="line">&#125;        </div><div class="line"></div><div class="line">println(&quot;----------------&quot;)</div><div class="line"></div><div class="line">val fruits = listOf(&quot;banana&quot;, &quot;avocado&quot;, &quot;apple&quot;, &quot;kiwi&quot;)</div><div class="line">   fruits</div><div class="line">           .filter &#123; it.startsWith(&quot;a&quot;) &#125;</div><div class="line">           .sortedBy &#123; it &#125;</div><div class="line">           .map &#123; it.toUpperCase() &#125;</div><div class="line">           .forEach &#123; println(it) &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">I/System.out: Google</div><div class="line">I/System.out: Apple</div><div class="line">I/System.out: Amazon</div><div class="line">I/System.out: ----------------</div><div class="line">I/System.out: My Dream</div><div class="line">I/System.out: ----------------</div><div class="line">I/System.out: APPLE</div><div class="line">I/System.out: AVOCADO</div><div class="line">I/System.out: ----------------</div></pre></td></tr></table></figure>
<p>第一个是最普通的循环打印<br>接下来是 when 表达式，它只会执行一次<br>如果表达式是这样的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">when &#123;</div><div class="line">       &quot;Amazon&quot; in items -&gt; println(&quot;Change The World&quot;)</div><div class="line">       &quot;Google&quot; in items -&gt; println(&quot;My Dream&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">I/System.out: Google</div><div class="line">I/System.out: Apple</div><div class="line">I/System.out: Amazon</div><div class="line">I/System.out: ----------------</div><div class="line">I/System.out: Change The World</div><div class="line">I/System.out: ----------------</div><div class="line">I/System.out: APPLE</div><div class="line">I/System.out: AVOCADO</div><div class="line">I/System.out: ----------------</div></pre></td></tr></table></figure>
<p>后面的 Google 即使也在 items 集合里面但是也不会输出『My Dream』</p>
<p>最后就是链式调用了，让我想到了 RxJava ，首先通过 filter 过滤只留下『a』 开头的，然后应该是自然排序，接着通过 map 转换成大写，最后将每一个都输出。</p>
<h3 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h3><p>一只成长中的图图。</p>
<h3 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h3><p>参考自:<br> <a href="https://www.kotlincn.net/docs/tutorials/android-plugin.html" target="_blank" rel="external">https://www.kotlincn.net/docs/tutorials/android-plugin.html</a></p>
<p><a href="https://huanglizhuo.gitbooks.io/kotlin-in-chinese/content/GettingStarted/Basic-Syntax.html" target="_blank" rel="external">https://huanglizhuo.gitbooks.io/kotlin-in-chinese/content/GettingStarted/Basic-Syntax.html</a></p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>tutuoo</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="https://github.com/tutuoo">https://github.com/tutuoo</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="https://github.com/tutuoo/2017/06/07/kotlin/">https://github.com/tutuoo/2017/06/07/kotlin/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/wechat.png" title="wechat">
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/alipay.png" title="alipay">
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/kotlin/">kotlin</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/05/01/April-Result/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">四月份总结</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:tutu_oo@163.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/tutuoo" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">tutuoo</span>
  </span>
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_uv">
    view <span id="busuanzi_value_site_uv"></span> times
  </span>
  
  <script>
    var birthDay = new Date("11/20/2014");
    var now = new Date();
    var duration = now.getTime() - birthDay.getTime();
    var total= Math.floor(duration / (1000 * 60 * 60 * 24));
    document.getElementById("showDays").innerHTML = "本站已运行 "+total+" 天";
  </script>
  <span id="showDays"></span>

</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://github.com/tutuoo/2017/06/07/kotlin/';
        this.page.identifier = '2017/06/07/kotlin/';
        this.page.title = 'Kotlin 学习笔记（1）基本语法';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//tutuoo.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.3.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.3.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            Read more..
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.3.x"></script>

  </body>
</html>
